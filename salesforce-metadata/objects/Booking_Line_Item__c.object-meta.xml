<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>ControlledByParent</externalSharingModel>
    <label>Booking Line Item</label>
    <nameField>
        <displayFormat>LI-{0000}</displayFormat>
        <label>Line Item Number</label>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Booking Line Items</pluralLabel>
    <searchLayouts/>
    <sharingModel>ControlledByParent</sharingModel>
    <visibility>Public</visibility>

    <!-- Master-Detail Relationship -->
    <fields>
        <fullName>Trip_Booking__c</fullName>
        <label>Trip Booking</label>
        <referenceTo>Trip_Booking__c</referenceTo>
        <relationshipLabel>Booking Line Items</relationshipLabel>
        <relationshipName>Booking_Line_Items</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>false</reparentableMasterDetail>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>

    <!-- Core Fields -->
    <fields>
        <fullName>Line_of_Business__c</fullName>
        <label>Line of Business</label>
        <required>true</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>FLIGHT</fullName>
                    <default>false</default>
                    <label>Flight</label>
                </value>
                <value>
                    <fullName>HOTEL</fullName>
                    <default>true</default>
                    <label>Hotel</label>
                </value>
                <value>
                    <fullName>CAR</fullName>
                    <default>false</default>
                    <label>Car</label>
                </value>
                <value>
                    <fullName>PACKAGE</fullName>
                    <default>false</default>
                    <label>Package</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>

    <fields>
        <fullName>Line_Item_Status__c</fullName>
        <label>Line Item Status</label>
        <required>true</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>ACTIVE</fullName>
                    <default>true</default>
                    <label>Active</label>
                </value>
                <value>
                    <fullName>CANCELLED</fullName>
                    <default>false</default>
                    <label>Cancelled</label>
                </value>
                <value>
                    <fullName>CANCELLING</fullName>
                    <default>false</default>
                    <label>Cancelling</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>

    <!-- Product Information -->
    <fields>
        <fullName>Product_Name__c</fullName>
        <label>Product Name</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Product_Code__c</fullName>
        <label>Product Code</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Destination_City__c</fullName>
        <label>Destination City</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Destination_Country__c</fullName>
        <label>Destination Country</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Start_Date__c</fullName>
        <label>Start Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>

    <fields>
        <fullName>End_Date__c</fullName>
        <label>End Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>

    <fields>
        <fullName>Nights__c</fullName>
        <label>Nights</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>

    <!-- Financial Information -->
    <fields>
        <fullName>Cash_Amount__c</fullName>
        <label>Cash Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>

    <fields>
        <fullName>Points_Redeemed__c</fullName>
        <label>Points Redeemed</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Currency_Code__c</fullName>
        <label>Currency Code</label>
        <length>3</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Taxes__c</fullName>
        <label>Taxes</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>

    <fields>
        <fullName>Fees__c</fullName>
        <label>Fees</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>

    <!-- Member Information -->
    <fields>
        <fullName>Loyalty_Program_Member__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <label>Loyalty Program Member</label>
        <referenceTo>LoyaltyProgramMember</referenceTo>
        <relationshipLabel>Booking Line Items</relationshipLabel>
        <relationshipName>Booking_Line_Items</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>

    <!-- Journal Tracking -->
    <fields>
        <fullName>Redemption_Journal__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <label>Redemption Journal</label>
        <referenceTo>TransactionJournal</referenceTo>
        <relationshipLabel>Booking Line Items (Redemption)</relationshipLabel>
        <relationshipName>Redemption_Line_Items</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>

    <fields>
        <fullName>Accrual_Journal__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <label>Accrual Journal</label>
        <referenceTo>TransactionJournal</referenceTo>
        <relationshipLabel>Booking Line Items (Accrual)</relationshipLabel>
        <relationshipName>Accrual_Line_Items</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>

    <fields>
        <fullName>Redemption_Journal_Id__c</fullName>
        <label>Redemption Journal Id</label>
        <length>18</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Accrual_Journal_Id__c</fullName>
        <label>Accrual Journal Id</label>
        <length>18</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <!-- Cancellation Tracking -->
    <fields>
        <fullName>Cancelled_Date__c</fullName>
        <label>Cancelled Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>DateTime</type>
    </fields>

    <fields>
        <fullName>Cancellation_Reason__c</fullName>
        <label>Cancellation Reason</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <fields>
        <fullName>Cancelled_By__c</fullName>
        <label>Cancelled By</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <!-- Internal System Tracking -->
    <fields>
        <fullName>Internal_Line_Item_Id__c</fullName>
        <label>Internal Line Item Id</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>

    <!-- Validation Rules -->
    <validationRules>
        <fullName>Service_End_After_Start</fullName>
        <active>true</active>
        <description>Service end date must be after or equal to service start date</description>
        <errorConditionFormula>AND(
            NOT(ISBLANK(Start_Date__c)),
            NOT(ISBLANK(End_Date__c)),
            End_Date__c &lt; Start_Date__c
        )</errorConditionFormula>
        <errorDisplayField>End_Date__c</errorDisplayField>
        <errorMessage>Service end date must be after or equal to service start date.</errorMessage>
    </validationRules>

    <validationRules>
        <fullName>Currency_Required_With_Cash</fullName>
        <active>true</active>
        <description>Currency code is required when cash amount is specified</description>
        <errorConditionFormula>AND(
            NOT(ISBLANK(Cash_Amount__c)),
            Cash_Amount__c &gt; 0,
            ISBLANK(Currency_Code__c)
        )</errorConditionFormula>
        <errorDisplayField>Currency_Code__c</errorDisplayField>
        <errorMessage>Currency code is required when cash amount is specified.</errorMessage>
    </validationRules>

    <validationRules>
        <fullName>No_Negative_Amounts</fullName>
        <active>true</active>
        <description>Cash amounts, taxes, fees, and points cannot be negative</description>
        <errorConditionFormula>OR(
            Cash_Amount__c &lt; 0,
            Taxes__c &lt; 0,
            Fees__c &lt; 0,
            Points_Redeemed__c &lt; 0
        )</errorConditionFormula>
        <errorMessage>Financial amounts cannot be negative.</errorMessage>
    </validationRules>
</CustomObject>